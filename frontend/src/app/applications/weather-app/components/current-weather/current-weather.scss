@import '../../../../variables/variables.scss';

.current-weather {
	position: relative;
	width: 100%;
	padding: 30px 20px 20px 20px;

	display: grid;
	grid-template-columns: 1fr;
	grid-template-rows: 1fr min-content;
	grid-row-gap: 20px;

	background-position: center;
	background-size: cover;

	border-radius: var(--weather-basic-border-radius);
	box-shadow: var(--weather-box-shadow-color);
	background-color: var(--bg);

	transition: transform 0.3s ease;
	transform: scale(1.05);

	&::after {
		content: '';
		z-index: 0;
		position: absolute;
		top: 0;
		left: 0;
		width: 100%;
		height: 100%;
		pointer-events: none;
		background-image: var(--weather-after-gradient);
		opacity: 0.5;
		border-radius: var(--weather-basic-border-radius);
	}

	@media (max-width: $mobile-width) {
		width: 100%;
		transform: scale(1);
		border-radius: 0 0 var(--weather-basic-border-radius) var(--weather-basic-border-radius);

		&::after {
			border-radius: 0 0 var(--weather-basic-border-radius) var(--weather-basic-border-radius);
		}

		&:hover {
			transform: none;
		}
	}
}

.current-weather__wrap {
	position: relative;
	z-index: 1;
	width: 100%;
	height: 100%;

	display: grid;
	grid-template-columns: 1fr;
	grid-template-rows: min-content min-content 1fr min-content min-content;
}

.current-weather__date {
	display: flex;
	flex-direction: column;
	align-items: flex-start;
	justify-content: center;
}

.current-weather__date-text {
	font-family: var(--weather-basic-font);
	color: var(--standart-white);
	font-size: var(--weather-current-location-date-text-size);
	font-weight: var(--weather-current-location-date-text-weight);

	&--big {
		font-size: calc(var(--weather-current-location-date-text-size) + 10px);
		font-weight: calc(var(--weather-current-location-date-text-weight) + 100);
	}
}

.current-weather__city {
	font-family: var(--weather-basic-font);
	color: var(--standart-white);

	font-size: var(--weather-current-location-date-text-size);
	font-weight: var(--weather-current-location-date-text-weight);
}

.current-weather__image {
	width: 70px;
	height: 70px;

	display: flex;
	align-self: end;

	object-fit: contain;
}

.current-weather__temperature {
	font-family: var(--weather-basic-font);
	color: var(--standart-white);
	font-size: var(--weather-current-temp-text-size);
	font-weight: var(--weather-current-temp-text-weight);
	line-height: var(--weather-current-temp-text-size);
}

.current-weather__temperature-info {
	font-family: var(--weather-basic-font);
	color: var(--standart-white);
	font-size: var(--weather-current-temp-info-text-size);
	font-weight: var(--weather-current-temp-info-text-weight);
}

.current-weather__image-info {
	position: relative;
	z-index: 1;

	display: grid;
	grid-template-columns: 1fr 1fr;
	grid-template-rows: min-content min-content;
	gap: 5px;
}

.current-weather__image-info-title {
	font-family: var(--weather-basic-font);
	color: var(--standart-white);
	font-size: calc(var(--weather-current-image-info-text-size) + 2px);
	font-weight: var(--weather-current-image-info-text-weight);
}

.current-weather__image-author {
	font-family: var(--weather-basic-font);
	color: var(--standart-white);
	font-size: var(--weather-current-image-info-text-size);
	font-weight: var(--weather-current-image-info-text-weight);

	align-self: left;
	grid-row-start: 2;
}

.current-weather__image-link {
	font-family: var(--weather-basic-font);
	color: var(--standart-white);
	font-size: var(--weather-current-image-info-text-size);
	font-weight: var(--weather-current-image-info-text-weight);

	align-self: right;
	grid-row-start: 2;
	text-align: right;

	&:hover {
		color: var(--basic-white);
	}
}

.skeleton {
	position: relative;
	z-index: 1;

	--card-padding: 20px;
  --card-height: 100%;
  --card-skeleton: linear-gradient(var(--surface), var(--card-height), transparent 0);

	--line-1-width: 50%;
	--line-1-height: 30px;
	--line-1-position: var(--card-padding) 10%;
	--line-1-skeleton: linear-gradient(var(--overlay), var(--line-1-height), transparent 0);

	--line-2-width: 40%;
	--line-2-height: 20px;
	--line-2-position: var(--card-padding) 20%;
	--line-2-skeleton: linear-gradient(var(--overlay) var(--line-2-height), transparent 0);

	--line-3-width: 35%;
	--line-3-height: 20px;
	--line-3-position: var(--card-padding) 30%;
	--line-3-skeleton: linear-gradient(var(--overlay) var(--line-3-height), transparent 0);

	--line-4-width: 80px;
	--line-4-height: 80px;
	--line-4-position: var(--card-padding) 50%;
	--line-4-skeleton: radial-gradient(circle 30px at center, var(--overlay) 99%, transparent 0);

	--line-5-width: 50%;
	--line-5-height: 30px;
	--line-5-position: var(--card-padding) 70%;
	--line-5-skeleton: linear-gradient(var(--overlay) var(--line-5-height), transparent 0);

	--line-6-width: 35%;
	--line-6-height: 20px;
	--line-6-position: var(--card-padding) 80%;
	--line-6-skeleton: linear-gradient(var(--overlay) var(--line-6-height), transparent 0);

	--line-7-width: 90%;
	--line-7-height: 15px;
	--line-7-position: var(--card-padding) 95%;
	--line-7-skeleton: linear-gradient(var(--overlay) var(--line-7-height), transparent 0);

  --blur-width: 200px;
  --blur-size: var(--blur-width) var(--card-height);

	&::before {
		position: absolute;
		content: '';
		top: -1px;
		left: -1px;
		width: calc(100% + 2px);
		height: calc(100% + 2px);
		z-index: 3;

    border-radius:var(--weather-basic-border-radius);
    box-shadow: var(--weather-box-shadow-color);

    background-image:
			var(--skeleton-line), //animation blur
			var(--line-1-skeleton),
			var(--line-2-skeleton),
			var(--line-3-skeleton),
			var(--line-4-skeleton),
			var(--line-5-skeleton),
			var(--line-6-skeleton),
			var(--line-7-skeleton),
      var(--card-skeleton)        //card
    ;

    background-size:
      var(--blur-size),
			var(--line-1-width) var(--line-1-height),
			var(--line-2-width) var(--line-2-height),
			var(--line-3-width) var(--line-3-height),
			var(--line-4-width) var(--line-4-height),
			var(--line-5-width) var(--line-5-height),
			var(--line-6-width) var(--line-6-height),
			var(--line-7-width) var(--line-7-height),
      100% 100%
    ;

    background-position:
      -150% 0,                      //animation
			var(--line-1-position),
			var(--line-2-position),
			var(--line-3-position),
			var(--line-4-position),
			var(--line-5-position),
			var(--line-6-position),
			var(--line-7-position),
      0 0                           //card
    ;

    background-repeat: no-repeat;
    animation: loading 1.5s infinite;
	}
}

@keyframes loading {
  to {
    background-position:
      200% 0,
			var(--line-1-position),
			var(--line-2-position),
			var(--line-3-position),
			var(--line-4-position),
			var(--line-5-position),
			var(--line-6-position),
			var(--line-7-position),
      0 0
    ;
  }
}
